specVersion: 0.0.2
description: Rawrshak Network
repository: https://github.com/gcbsumid/B44
schema:
  file: ./schema.graphql
dataSources:
  - name: OVCToken
    kind: ethereum/contract
    network: mainnet
    source:
      address: "0x49724343b090C1B00E067f43D282dA821DA04D08"
      abi: OVCToken
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/mapping.ts
      entities:
        - Token
        - TokenEntity
        - Account
      abis:
        - name: OVCToken
          file: ./abis/OVCToken.json
      eventHandlers:
        - event: TokenCreated(address,bytes32,string,string,uint256)
          handler: handleTokenCreated
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
  - name: GameFactory
    kind: ethereum/contract
    network: mainnet
    source:
      address: "0xDD67288079bFc421e695D3313b1505309dFBe9e1"
      abi: GameFactory
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/game.ts
      entities:
        - Game
        - Account
      abis:
        - name: GameFactory
          file: ./abis/GameFactory.json
      eventHandlers:
        - event: GameContractCreated(uint256,address,address)
          handler: handleGameContractCreated
  # Todo: remove when finished. Not completely sure if this is needed yet
  # - name: CraftingFactory
  #   kind: ethereum/contract
  #   network: mainnet
  #   source:
  #     address: "0xDD67288079bFc421e695D3313b1505309dFBe9e1"
  #     abi: CraftingFactory
  #   mapping:
  #     kind: ethereum/events
  #     apiVersion: 0.0.4
  #     language: wasm/assemblyscript
  #     file: ./src/crafting.ts
  #     entities:
  #       - Crafting
  #       - Account
  #     abis:
  #       - name: CraftingFactory
  #         file: ./abis/CraftingFactory.json
      # eventHandlers:
      #   - event: CraftingContractCreated(uint256,address,address)
      #     handler: handleCraftingContractCreated
  - name: LootboxFactory
    kind: ethereum/contract
    network: mainnet
    source:
      address: "0xDD67288079bFc421e695D3313b1505309dFBe9e1"
      abi: LootboxFactory
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/lootbox.ts
      entities:
        - Lootbox
        - Account
      abis:
        - name: LootboxFactory
          file: ./abis/LootboxFactory.json
      eventHandlers:
        - event: LootboxContractCreated(uint256,address,address)
          handler: handleLootboxContractCreated
templates:
  - name: Game
    kind: ethereum/contract
    network: mainnet
    source:
      abi: Game
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/game.ts
      entities:
        - Game
        - Item
        - ItemBalance
      abis:
        - name: Game
          file: ./abis/Game.json
      eventHandlers:
        - event: GameManagerSet(uint256,address)
          handler: handleGameManagerSet
        - event: ItemCreated(uint256,uint256,address,uint256)
          handler: handleItemCreated
        - event: ItemBatchCreated(uint256,uint256[],address,uint256[])
          handler: handleItemBatchCreated
        - event: ItemSupplyChanged(uint256,uint256,uint256)
          handler: handleItemSupplyChanged
        - event: ItemBatchSupplyChanged(uint256,uint256[],uint256[])
          handler: handleItemBatchSupplyChanged
        - event: TransferSingle(indexed address,indexed address,indexed address,uint256,uint256)
          handler: handleTransferSingle
        - event: TransferBatch(indexed address,indexed address,indexed address,uint256[],uint256[])
          handler: handleTransferBatch
  - name: GameManager
    kind: ethereum/contract
    network: mainnet
    source:
      abi: GameManager
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/game.ts
      entities:
        - Game
      abis:
        - name: GameManager
          file: ./abis/GameManager.json
  - name: Crafting
    kind: ethereum/contract
    network: mainnet
    source:
      abi: Crafting
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/crafting.ts
      entities:
        - RecipeEntry
        - Item
        - Token
        - Recipe
      abis:
        - name: Crafting
          file: ./abis/Crafting.json
      eventHandlers:
        - event: ItemCrafted(uint256,uint256,address)
          handler: handleItemCrafted
        - event: RecipeCreated(uint256,uint256)
          handler: handleRecipeCreated
        - event: RecipeMaterialsUpdated(uint256,uint256,uint256[],uint256[])
          handler: handleRecipeMaterialsUpdated
        - event: RecipeRewardsUpdated(uint256,uint256,uint256[],uint256[])
          handler: handleRecipeRewardsUpdated
        - event: RecipeActiveSet(uint256,uint256,bool)
          handler: handleRecipeActiveSet
        - event: RecipeCostUpdated(uint256,uint256,address,uint256)
          handler: handleRecipeCostUpdated   
  - name: Lootbox
    kind: ethereum/contract
    network: mainnet
    source:
      abi: Lootbox
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      file: ./src/lootbox.ts
      entities:
        - Lootbox
        - Item
        - Token
        - LootboxMaterial
        - LootboxReward
        - LootboxEntry
        - Account
      abis:
        - name: Lootbox
          file: ./abis/Lootbox.json
      eventHandlers:
        - event: InputItemBatchRegistered(uint256,uint256[],uint256[],uint256[])
          handler: handleInputItemBatchRegistered
        - event: RewardItemBatchRegistered(uint256,uint256[],uint8[],uint256[])
          handler: handleRewardItemBatchRegistered
        - event: TradeMinimumSet(uint256,uint256)
          handler: handleTradeMinimumSet
        - event: LootboxGenerated(uint256,address,uint256)
          handler: handleLootboxGenerated
        - event: LootboxOpened(uint256,address,uint256,uint256[])
          handler: handleLootboxOpened
  # Todo: remove when finished. Not completely sure if this is needed yet
  # - name: CraftingManager
  #   kind: ethereum/contract
  #   network: mainnet
  #   source:
  #     abi: CraftingManager
  #   mapping:
  #     kind: ethereum/events
  #     apiVersion: 0.0.4
  #     language: wasm/assemblyscript
  #     file: ./src/crafting.ts
  #     entities:
  #       - Recipe
  #     abis:
  #       - name: CraftingManager
  #         file: ./abis/CraftingManager.json